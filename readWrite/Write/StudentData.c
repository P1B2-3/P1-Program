/*
This function is created by: Asger Geel Weirs√∏e for use only in the P1-Project.
The function creates a document that writes the data used to generate a school schedule.


Date:           7/12
Version:        2.00
*/

int StudentData(Data_Class_t classdata[],numberOfClasses){
    #if defined(_WIN32)     /* den tjekker om det er windows til at lave en folder */
        _mkdir("./data");
    #else                   /* laver en en text fil i linux */
        mkdir("./data", 0700); 
    #endif     

    int i,j,k;
    FILE *fptr; /* filpointer */

    if ((fptr=fopen("data/StudentData.txt","r"))==NULL){    /*  */
        printf("Did not find file, creating new\n");
        fptr = fopen("data/StudentData.txt", "w"); 
        fputs("//This entire document is dedicated to the processing of a school schedule.\n",fptr);
        fputs("//Please do not edit this file for any reasons. Unless you know what you are doing.\n\n",fptr);

        fputs("-------------ALL STUDENTS--------------\n",fptr);
        
        for(i = 0;i<numberOfClasses;i++){
            fputs("--Class start--\n",fptr);
            fputs("##",fptr);
            fprintf(fptr, "Number in class: %i \n", classdata[i].student_num );
            fprintf(fptr,"Klasse nr: %i.%c\n",classdata[i].year,classdata[i].name )
            fprintf(fptr,"Nr of examener: %i ",strlen(classdata[i].subjects));
            fputs("&",fptr);
            for(j = 0; j<strlen(classdata[i].subjects);j++) {
                fprintf(fptr, "%i: %s\n",j+1,classdata[i].subjects[j].subject );
            }
            fputs("&",fptr);

            for(k = 1; k < classdata[i].student_num ;k++) {
                fprintf(fptr,"Student nr: %i\n",classdata[i].students[k].exam_number );
                fprintf(fptr,"ID: %i\n",classdata[i].students[k].unikID);
                fprintf(fptr,"Name: %s %s\n",classdata[i].students[k].name,classdata[i].students[k].surname );
            }

            fputs("--Class end--\n\n",fptr);
        }
    }
    
    fclose(fptr);

    return (0);
}
